(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,54520,e=>{"use strict";var s=e.i(5111),a=e.i(59053);function t({variant:e="default",href:t,className:n,children:l,...i}){let r=(0,a.cn)("wood-btn","primary"===e&&"wood-btn-primary","danger"===e&&"wood-btn-danger","sm"===e&&"text-sm py-1 px-3",n);return t?(0,s.jsx)("a",{href:t,className:r,children:l}):(0,s.jsx)("button",{className:r,...i,children:l})}e.s(["default",()=>t])},3634,e=>{"use strict";var s=e.i(5111);function a({text:e="Loading..."}){return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-end gap-3",children:[(0,s.jsx)("div",{className:"w-2 h-8 bg-[var(--parchment-dark)] rounded-t-sm"}),(0,s.jsx)("div",{className:"candle-flame"}),(0,s.jsx)("div",{className:"w-2 h-8 bg-[var(--parchment-dark)] rounded-t-sm"})]}),(0,s.jsx)("p",{className:"text-[var(--gold)] font-[var(--font-heading)] text-lg animate-pulse",children:e})]})}e.s(["default",()=>a])},9064,e=>{"use strict";var s=e.i(5111),a=e.i(59053);function t({children:e,className:t,pinned:n=!1}){return(0,s.jsx)("div",{className:(0,a.cn)(n?"quest-card":"parchment","p-5 mb-4",t),children:e})}e.s(["default",()=>t])},31119,e=>{"use strict";var s=e.i(55703);function a(e,t=[]){let[n,l]=(0,s.useState)(null),[i,r]=(0,s.useState)(!0),[c,d]=(0,s.useState)(null),o=(0,s.useCallback)(()=>{r(!0),d(null),e().then(l).catch(e=>d(e.message||"Failed to load")).finally(()=>r(!1))},t);return(0,s.useEffect)(()=>{o()},[o]),{data:n,loading:i,error:c,refetch:o}}e.s(["useApi",()=>a])},49159,e=>{"use strict";var s=e.i(5111),a=e.i(59053);function t({campaign:e,size:t=36}){let n=(0,a.campaignColor)(e),l=e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return(0,s.jsx)("span",{className:"wax-seal",style:{backgroundColor:n,width:t,height:t,fontSize:.3*t},title:e,children:l})}e.s(["default",()=>t])},85637,e=>{"use strict";var s=e.i(5111),a=e.i(55703),t=e.i(31119),n=e.i(8779),l=e.i(59053),i=e.i(3634),r=e.i(9064),c=e.i(49159),d=e.i(54520),o=e.i(55657);function m(){let[e,m]=(0,a.useState)(""),{data:x,loading:h}=(0,t.useApi)(()=>(0,n.getAdminHistory)(e?{campaign:e}:void 0),[e]),{data:u}=(0,t.useApi)(n.getCampaigns),{toast:p}=(0,o.useToast)(),[j,f]=(0,a.useState)(null),[g,v]=(0,a.useState)(""),N=(x||[]).find(e=>e.sessionId===j);return h?(0,s.jsx)(i.default,{text:"Opening the campaign journal..."}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"scroll-heading text-3xl mb-6",children:"ðŸ“– Campaign Journal"}),(0,s.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,s.jsxs)("select",{value:e,onChange:e=>m(e.target.value),className:"tavern-input max-w-[200px]",children:[(0,s.jsx)("option",{value:"",children:"All Campaigns"}),(u||[]).map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsx)(d.default,{variant:"sm",onClick:()=>window.location.href="/api/admin/export/history",children:"Export CSV"})]}),(0,s.jsx)("div",{className:"parchment overflow-x-auto mb-4",children:(0,s.jsxs)("table",{className:"w-full text-sm text-[var(--ink)]",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b-2 border-[var(--parchment-dark)]",children:[(0,s.jsx)("th",{className:"text-left p-2",children:"Date"}),(0,s.jsx)("th",{className:"text-left p-2",children:"Campaign"}),(0,s.jsx)("th",{className:"text-left p-2",children:"Attendees"}),(0,s.jsx)("th",{className:"p-2",children:"Count"}),(0,s.jsx)("th",{className:"p-2",children:"Recap"})]})}),(0,s.jsx)("tbody",{children:0===(x||[]).length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:5,className:"p-6 text-center text-[var(--ink-faded)] italic",children:"No completed sessions. Sessions appear here after being marked completed."})}):(x||[]).map(e=>(0,s.jsxs)("tr",{className:"border-b border-[rgba(0,0,0,0.05)] cursor-pointer hover:bg-[rgba(201,169,89,0.05)]",onClick:()=>{f(e.sessionId),v(e.dmPostNotes)},children:[(0,s.jsx)("td",{className:"p-2",children:(0,l.formatDate)(e.sessionDate)}),(0,s.jsx)("td",{className:"p-2",children:(0,s.jsx)(c.default,{campaign:e.campaign,size:20})}),(0,s.jsx)("td",{className:"p-2 text-xs",children:e.attendeeCharNames||"â€”"}),(0,s.jsx)("td",{className:"p-2 text-center",children:e.attendeeCount}),(0,s.jsx)("td",{className:"p-2 text-center",children:e.recapDrafted?"âœ…":"âŒ"})]},e.sessionId))})]})}),N&&(0,s.jsxs)(r.default,{children:[(0,s.jsxs)("h3",{className:"font-[var(--font-heading)] text-lg text-[var(--gold)] mb-3",children:[N.campaign," â€” ",(0,l.formatDate)(N.sessionDate)]}),(0,s.jsxs)("p",{className:"text-sm text-[var(--ink)] mb-3",children:[(0,s.jsxs)("strong",{children:["Attendees (",N.attendeeCount,"):"]})," ",N.attendeeCharNames||"None"]}),(0,s.jsx)("label",{className:"block text-sm font-semibold text-[var(--ink)] mb-1",children:"DM Post-Session Notes"}),(0,s.jsx)("textarea",{value:g,onChange:e=>v(e.target.value),className:"tavern-input",rows:4}),(0,s.jsx)(d.default,{variant:"primary",className:"mt-2",onClick:async()=>{let e=await (0,n.updateHistoryNotes)(N.sessionId,g);e.success?p("Notes saved!","success"):p(e.message||"Failed","error")},children:"Save Notes"})]})]})}e.s(["default",()=>m])}]);