(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,54520,e=>{"use strict";var a=e.i(5111),t=e.i(59053);function s({variant:e="default",href:s,className:r,children:l,...n}){let i=(0,t.cn)("wood-btn","primary"===e&&"wood-btn-primary","danger"===e&&"wood-btn-danger","sm"===e&&"text-sm py-1 px-3",r);return s?(0,a.jsx)("a",{href:s,className:i,children:l}):(0,a.jsx)("button",{className:i,...n,children:l})}e.s(["default",()=>s])},3634,e=>{"use strict";var a=e.i(5111);function t({text:e="Loading..."}){return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-end gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-8 bg-[var(--parchment-dark)] rounded-t-sm"}),(0,a.jsx)("div",{className:"candle-flame"}),(0,a.jsx)("div",{className:"w-2 h-8 bg-[var(--parchment-dark)] rounded-t-sm"})]}),(0,a.jsx)("p",{className:"text-[var(--gold)] font-[var(--font-heading)] text-lg animate-pulse",children:e})]})}e.s(["default",()=>t])},9064,e=>{"use strict";var a=e.i(5111),t=e.i(59053);function s({children:e,className:s,pinned:r=!1}){return(0,a.jsx)("div",{className:(0,t.cn)(r?"quest-card":"parchment","p-5 mb-4",s),children:e})}e.s(["default",()=>s])},49159,e=>{"use strict";var a=e.i(5111),t=e.i(59053);function s({campaign:e,size:s=36}){let r=(0,t.campaignColor)(e),l=e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return(0,a.jsx)("span",{className:"wax-seal",style:{backgroundColor:r,width:s,height:s,fontSize:.3*s},title:e,children:l})}e.s(["default",()=>s])},98010,e=>{"use strict";var a=e.i(5111);let t={any:{label:"Any Level",range:"1-20"},tier1:{label:"Tier 1",range:"1-4",name:"Local Heroes"},tier2:{label:"Tier 2",range:"5-10",name:"Heroes of the Realm"},tier3:{label:"Tier 3",range:"11-16",name:"Masters of the Realm"},tier4:{label:"Tier 4",range:"17-20",name:"Masters of the World"}};function s({tier:e}){let s=e||"any",r=t[s]||t.any;return"any"===s?null:(0,a.jsxs)("span",{className:"tier-shield",title:"name"in r?r.name:"",children:["ðŸ›¡ï¸ ",r.label,": Lv ",r.range]})}e.s(["default",()=>s],98010)},13875,e=>{"use strict";var a=e.i(5111),t=e.i(55703),s=e.i(4629),r=e.i(84249),l=e.i(8779),n=e.i(59053),i=e.i(3634),c=e.i(9064),d=e.i(49159),m=e.i(54520),o=e.i(98010),h=e.i(55657);let x=["Barbarian","Bard","Cleric","Druid","Fighter","Monk","Paladin","Ranger","Rogue","Sorcerer","Warlock","Wizard","Artificer","Blood Hunter","Other"],u=["Human","Elf","Half-Elf","Dwarf","Halfling","Gnome","Half-Orc","Tiefling","Dragonborn","Goliath","Aasimar","Genasi","Tabaxi","Kenku","Firbolg","Tortle","Warforged","Changeling","Kalashtar","Shifter","Harengon","Owlin","Other"];function f(){return(0,a.jsx)(t.Suspense,{children:(0,a.jsx)(v,{})})}function v(){let e=(0,s.useSearchParams)().get("sessionId")||"",{user:f,isLoggedIn:v}=(0,r.useAuth)(),{toast:g}=(0,h.useToast)(),[p,j]=(0,t.useState)(null),[b,N]=(0,t.useState)(""),[y,k]=(0,t.useState)([]),[S,C]=(0,t.useState)([]),[T,w]=(0,t.useState)(!0),[R,L]=(0,t.useState)(!1),[A,P]=(0,t.useState)(!1),[B,O]=(0,t.useState)(""),[F,H]=(0,t.useState)(""),[q,D]=(0,t.useState)([]),[M,Q]=(0,t.useState)(""),[G,K]=(0,t.useState)(""),[Y,I]=(0,t.useState)(""),[U,W]=(0,t.useState)(""),[z,E]=(0,t.useState)(""),[J,V]=(0,t.useState)(""),[X,Z]=(0,t.useState)("");(0,t.useEffect)(()=>{e?Promise.all([(0,l.getSession)(e),(0,l.getCsrfToken)(),v?(0,l.getMyCharacters)():Promise.resolve([]),(0,l.getCampaigns)()]).then(([e,a,t,s])=>{j(e),N(a.token),k(t),C(s)}).catch(()=>{}).finally(()=>w(!1)):w(!1)},[e,v]);let $=async a=>{a.preventDefault(),L(!0);try{let a=await (0,l.submitSignup)({csrfToken:b,sessionId:e,characterName:F,characterClass:q.join(", "),characterLevel:parseInt(Y,10),characterRace:"Other"===M?G:M,preferredCampaign:U,accessibilityNeeds:z,dmNotes:J,playedBefore:X});a.success?(P(!0),O(a.message||"")):g(a.message||"Failed","error")}catch(e){g("An error occurred","error")}L(!1)};return T?(0,a.jsx)(i.default,{text:"Preparing the sign-up scroll..."}):e&&p?v?p.spotsRemaining<=0?(0,a.jsxs)(c.default,{className:"text-center py-10",children:[(0,a.jsx)("h2",{className:"font-[var(--font-heading)] text-xl text-[var(--candle)]",children:"Quest Full"}),(0,a.jsx)("p",{className:"text-[var(--ink-faded)] mt-2",children:"This adventuring party is at capacity."}),(0,a.jsx)(m.default,{variant:"primary",href:"/",className:"mt-4",children:"Find Another Quest"})]}):A?(0,a.jsxs)(c.default,{className:"text-center py-10",children:[(0,a.jsx)("h2",{className:"font-[var(--font-heading)] text-xl text-green-700",children:"ðŸŽ‰ You're Registered!"}),(0,a.jsx)("p",{className:"text-[var(--ink)] mt-2",children:B}),(0,a.jsxs)("div",{className:"flex gap-3 justify-center mt-4",children:[(0,a.jsx)(m.default,{variant:"primary",href:"/",children:"Quest Board"}),(0,a.jsx)(m.default,{href:"/my-sessions",children:"My Quests"})]})]}):(0,a.jsxs)("div",{children:[(0,a.jsxs)(c.default,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-[var(--font-heading)] text-xl text-[var(--ink)]",children:p.title||p.campaign}),(0,a.jsxs)("p",{className:"text-sm text-[var(--ink-faded)]",children:[(0,n.formatDate)(p.date)," â€¢ ",(0,n.formatTime)(p.startTime)," â€” ",(0,n.formatTime)(p.endTime)]}),p.levelTier&&"any"!==p.levelTier&&(0,a.jsx)(o.default,{tier:p.levelTier})]}),(0,a.jsx)(d.default,{campaign:p.campaign,size:44})]}),(0,a.jsxs)("p",{className:"text-sm text-[var(--ink-faded)] mt-2",children:[p.spotsRemaining," spot",1!==p.spotsRemaining?"s":""," remaining"]})]}),y.length>0&&(0,a.jsxs)(c.default,{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-[var(--ink)] mb-2",children:"Your Characters"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[y.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>{H(e.characterName),I(String(e.characterLevel)),Q(u.includes(e.characterRace||"")?e.characterRace||"":"Other"),u.includes(e.characterRace||"")||K(e.characterRace||""),D(e.characterClass.split(",").map(e=>e.trim()))},className:"wood-btn text-xs py-1 px-3",children:[e.characterName," ",(0,a.jsxs)("span",{className:"opacity-60",children:["(",e.characterClass," Lv",e.characterLevel,")"]})]},t)),(0,a.jsx)("button",{onClick:()=>{H(""),I(""),D([]),Q("")},className:"wood-btn text-xs py-1 px-3",children:"+ New Character"})]})]}),(0,a.jsxs)("form",{onSubmit:$,children:[(0,a.jsxs)(c.default,{children:[(0,a.jsx)("h3",{className:"font-[var(--font-heading)] text-lg text-[var(--ink)] mb-3",children:"Your Character"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-[var(--ink)] mb-1",children:"Character Name *"}),(0,a.jsx)("input",{value:F,onChange:e=>H(e.target.value),className:"tavern-input",required:!0,maxLength:50})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-[var(--ink)] mb-1",children:"Class *"}),(0,a.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-5 gap-1",children:x.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-1 text-sm text-[var(--ink)]",children:[(0,a.jsx)("input",{type:"checkbox",checked:q.includes(e),onChange:a=>D(a.target.checked?[...q,e]:q.filter(a=>a!==e)),className:"accent-[var(--gold)]"}),e]},e))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-[var(--ink)] mb-1",children:"Race *"}),(0,a.jsxs)("select",{value:M,onChange:e=>Q(e.target.value),className:"tavern-input",required:!0,children:[(0,a.jsx)("option",{value:"",children:"â€” Select â€”"}),u.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),"Other"===M&&(0,a.jsx)("input",{value:G,onChange:e=>K(e.target.value),className:"tavern-input mt-1",placeholder:"Specify"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-[var(--ink)] mb-1",children:"Level *"}),(0,a.jsx)("input",{type:"number",value:Y,onChange:e=>I(e.target.value),className:"tavern-input",min:1,max:20,required:!0})]})]})]})]}),(0,a.jsxs)(c.default,{children:[(0,a.jsxs)("h3",{className:"font-[var(--font-heading)] text-lg text-[var(--ink)] mb-3",children:["For the DM ",(0,a.jsx)("span",{className:"text-xs text-[var(--ink-faded)]",children:"(optional)"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-[var(--ink)] mb-1",children:"Preferred Campaign"}),(0,a.jsxs)("select",{value:U,onChange:e=>W(e.target.value),className:"tavern-input",children:[(0,a.jsx)("option",{value:"",children:"No Preference"}),S.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-[var(--ink)] mb-1",children:"Accessibility Needs"}),(0,a.jsx)("textarea",{value:z,onChange:e=>E(e.target.value),className:"tavern-input",rows:2,maxLength:1e3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-[var(--ink)] mb-1",children:"Anything the DM Should Know"}),(0,a.jsx)("textarea",{value:J,onChange:e=>V(e.target.value),className:"tavern-input",rows:2,maxLength:1e3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-[var(--ink)] mb-1",children:"Played with this group before?"}),(0,a.jsx)("div",{className:"flex gap-4",children:["Yes","No","First Time"].map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-1 text-sm text-[var(--ink)]",children:[(0,a.jsx)("input",{type:"radio",name:"playedBefore",value:e,checked:X===e,onChange:()=>Z(e),className:"accent-[var(--gold)]"}),e]},e))})]})]})]}),(0,a.jsx)(m.default,{variant:"primary",type:"submit",disabled:R,className:"w-full py-3 text-lg",children:R?"Rolling for initiative...":"âš”ï¸ Sign Up for This Quest"})]})]}):(0,a.jsxs)(c.default,{className:"text-center py-10",children:[(0,a.jsx)("h2",{className:"font-[var(--font-heading)] text-xl text-[var(--ink)]",children:"Sign In Required"}),(0,a.jsx)("p",{className:"text-[var(--ink-faded)] mt-2",children:"You must sign in with Google before joining a quest."}),(0,a.jsx)(m.default,{variant:"primary",href:"/auth/google",className:"mt-4",children:"Sign In with Google"})]}):(0,a.jsxs)(c.default,{className:"text-center py-10",children:[(0,a.jsx)("h2",{className:"font-[var(--font-heading)] text-xl text-[var(--ink)]",children:"Quest Not Found"}),(0,a.jsx)("p",{className:"text-[var(--ink-faded)] mt-2",children:"This quest scroll doesn't exist or has been removed."}),(0,a.jsx)(m.default,{variant:"primary",href:"/",className:"mt-4",children:"Back to Quest Board"})]})}e.s(["default",()=>f])}]);