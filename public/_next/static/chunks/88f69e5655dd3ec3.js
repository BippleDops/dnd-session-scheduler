(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,54520,e=>{"use strict";var a=e.i(5111),s=e.i(59053);function t({variant:e="default",href:t,className:r,children:l,...i}){let c=(0,s.cn)("wood-btn","primary"===e&&"wood-btn-primary","danger"===e&&"wood-btn-danger","sm"===e&&"text-sm py-1 px-3",r);return t?(0,a.jsx)("a",{href:t,className:c,children:l}):(0,a.jsx)("button",{className:c,...i,children:l})}e.s(["default",()=>t])},3634,e=>{"use strict";var a=e.i(5111);function s({text:e="Loading..."}){return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-end gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-8 bg-[var(--parchment-dark)] rounded-t-sm"}),(0,a.jsx)("div",{className:"candle-flame"}),(0,a.jsx)("div",{className:"w-2 h-8 bg-[var(--parchment-dark)] rounded-t-sm"})]}),(0,a.jsx)("p",{className:"text-[var(--gold)] font-[var(--font-heading)] text-lg animate-pulse",children:e})]})}e.s(["default",()=>s])},9064,e=>{"use strict";var a=e.i(5111),s=e.i(59053);function t({children:e,className:t,pinned:r=!1}){return(0,a.jsx)("div",{className:(0,s.cn)(r?"quest-card":"parchment","p-5 mb-4",t),children:e})}e.s(["default",()=>t])},31119,e=>{"use strict";var a=e.i(55703);function s(e,t=[]){let[r,l]=(0,a.useState)(null),[i,c]=(0,a.useState)(!0),[n,d]=(0,a.useState)(null),m=(0,a.useCallback)(()=>{c(!0),d(null),e().then(l).catch(e=>d(e.message||"Failed to load")).finally(()=>c(!1))},t);return(0,a.useEffect)(()=>{m()},[m]),{data:r,loading:i,error:n,refetch:m}}e.s(["useApi",()=>s])},49159,e=>{"use strict";var a=e.i(5111),s=e.i(59053);function t({campaign:e,size:t=36}){let r=(0,s.campaignColor)(e),l=e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return(0,a.jsx)("span",{className:"wax-seal",style:{backgroundColor:r,width:t,height:t,fontSize:.3*t},title:e,children:l})}e.s(["default",()=>t])},71112,e=>{"use strict";var a=e.i(5111),s=e.i(31119),t=e.i(84249),r=e.i(8779),l=e.i(59053),i=e.i(3634),c=e.i(9064),n=e.i(49159),d=e.i(54520),m=e.i(55657);function h(){let{isLoggedIn:e}=(0,t.useAuth)(),{data:h,loading:x,refetch:o}=(0,s.useApi)(r.getMyRegistrations),{toast:u}=(0,m.useToast)();if(!e)return(0,a.jsxs)(c.default,{className:"text-center py-10",children:[(0,a.jsx)("h2",{className:"font-[var(--font-heading)] text-xl text-[var(--ink)]",children:"Sign In to View Your Quests"}),(0,a.jsx)("p",{className:"text-[var(--ink-faded)] mt-2",children:"Your quest log awaits, adventurer."}),(0,a.jsx)(d.default,{variant:"primary",href:"/auth/google",className:"mt-4",children:"Sign In with Google"})]});if(x)return(0,a.jsx)(i.default,{text:"Opening your quest log..."});let p=async e=>{if(!confirm("Abandon this quest?"))return;let a=await (0,r.cancelMyRegistration)(e);a.success?(u("Quest cancelled","success"),o()):u(a.message||"Failed","error")},f=async()=>{let e=await (0,r.getMyFeedToken)();e.token?(navigator.clipboard.writeText(e.url),u("Calendar feed URL copied!","success")):u("Sign up for a session first","warning")};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"scroll-heading text-3xl",children:"ðŸŽ’ My Quests"}),(0,a.jsx)(d.default,{variant:"sm",onClick:f,children:"ðŸ“… Subscribe My Calendar"})]}),(0,a.jsx)("h2",{className:"scroll-heading text-xl mb-3",children:"Upcoming Adventures"}),h?.upcoming.length===0?(0,a.jsx)(c.default,{className:"text-center py-6",children:(0,a.jsxs)("p",{className:"text-[var(--ink-faded)] italic",children:["No upcoming quests. ",(0,a.jsx)("a",{href:"/sessions",className:"text-[var(--gold)] underline",children:"Browse the quest board!"})]})}):(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 mb-6",children:h?.upcoming.map(e=>(0,a.jsxs)("div",{className:"quest-card p-5 pt-6",style:{borderLeft:`4px solid ${(0,l.campaignColor)(e.campaign)}`},children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-[var(--font-heading)] text-lg text-[var(--ink)]",children:e.title||e.campaign}),(0,a.jsxs)("p",{className:"text-sm text-[var(--ink-faded)]",children:[(0,l.formatDate)(e.date)," â€¢ ",(0,l.formatTime)(e.startTime)," â€” ",(0,l.formatTime)(e.endTime)]}),(0,a.jsxs)("p",{className:"text-sm text-[var(--ink)] mt-1",children:["Playing as ",(0,a.jsx)("strong",{children:e.characterName})," (",e.characterClass," Lv.",e.characterLevel,")"]})]}),(0,a.jsx)(n.default,{campaign:e.campaign})]}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(d.default,{variant:"danger",onClick:()=>p(e.registrationId),className:"text-xs",children:"Cancel Quest"})})]},e.registrationId))}),(0,a.jsx)("h2",{className:"scroll-heading text-xl mb-3 mt-6",children:"Past Adventures"}),h?.past.length===0?(0,a.jsx)(c.default,{className:"text-center py-6",children:(0,a.jsx)("p",{className:"text-[var(--ink-faded)] italic",children:"No past adventures yet."})}):(0,a.jsx)("div",{className:"parchment overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm text-[var(--ink)]",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-[var(--parchment-dark)]",children:[(0,a.jsx)("th",{className:"text-left p-2 font-semibold",children:"Date"}),(0,a.jsx)("th",{className:"text-left p-2",children:"Campaign"}),(0,a.jsx)("th",{className:"text-left p-2",children:"Character"}),(0,a.jsx)("th",{className:"text-left p-2",children:"Status"})]})}),(0,a.jsx)("tbody",{children:h?.past.map(e=>(0,a.jsxs)("tr",{className:"border-b border-[rgba(0,0,0,0.05)]",children:[(0,a.jsx)("td",{className:"p-2",children:(0,l.formatDate)(e.date)}),(0,a.jsx)("td",{className:"p-2",children:(0,a.jsx)(n.default,{campaign:e.campaign,size:24})}),(0,a.jsxs)("td",{className:"p-2",children:[e.characterName," (",e.characterClass,")"]}),(0,a.jsx)("td",{className:"p-2",children:(0,a.jsx)("span",{className:"tier-shield",children:e.attended?"Attended":e.status})})]},e.registrationId))})]})}),(0,a.jsx)("h2",{className:"scroll-heading text-xl mb-3 mt-6",children:"My Characters"}),(0,a.jsx)("div",{className:"grid gap-3 grid-cols-2 md:grid-cols-3",children:h?.characters.map((e,s)=>(0,a.jsxs)(c.default,{children:[(0,a.jsx)("p",{className:"font-[var(--font-heading)] text-[var(--gold)] text-lg",children:e.characterName}),(0,a.jsxs)("p",{className:"text-sm text-[var(--ink-faded)]",children:[e.characterClass," Â· Level ",e.characterLevel,e.characterRace?` \xb7 ${e.characterRace}`:""]})]},s))})]})}e.s(["default",()=>h])}]);