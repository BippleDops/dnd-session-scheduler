(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3634,e=>{"use strict";var s=e.i(5111);function t({text:e="Loading..."}){return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-end gap-3",children:[(0,s.jsx)("div",{className:"w-2 h-8 bg-[var(--parchment-dark)] rounded-t-sm"}),(0,s.jsx)("div",{className:"candle-flame"}),(0,s.jsx)("div",{className:"w-2 h-8 bg-[var(--parchment-dark)] rounded-t-sm"})]}),(0,s.jsx)("p",{className:"text-[var(--gold)] font-[var(--font-heading)] text-lg animate-pulse",children:e})]})}e.s(["default",()=>t])},9064,e=>{"use strict";var s=e.i(5111),t=e.i(59053);function a({children:e,className:a,pinned:r=!1,title:l}){return(0,s.jsxs)("div",{className:(0,t.cn)(r?"quest-card":"parchment","p-5 mb-4",a),children:[l&&(0,s.jsx)("h2",{className:"font-[var(--font-heading)] text-lg text-[var(--gold)] mb-3",children:l}),e]})}e.s(["default",()=>a])},54520,e=>{"use strict";var s=e.i(5111),t=e.i(59053);function a({variant:e="default",href:a,className:r,children:l,...i}){let n=(0,t.cn)("wood-btn","primary"===e&&"wood-btn-primary","secondary"===e&&"opacity-70 hover:opacity-100","danger"===e&&"wood-btn-danger","sm"===e&&"text-sm py-1 px-3",r);return a?(0,s.jsx)("a",{href:a,className:n,children:l}):(0,s.jsx)("button",{className:n,...i,children:l})}e.s(["default",()=>a])},31119,e=>{"use strict";var s=e.i(55703);function t(e,a=[]){let[r,l]=(0,s.useState)(null),[i,n]=(0,s.useState)(!0),[c,d]=(0,s.useState)(null),o=(0,s.useCallback)(()=>{n(!0),d(null),e().then(l).catch(e=>d(e.message||"Failed to load")).finally(()=>n(!1))},a);return(0,s.useEffect)(()=>{o()},[o]),{data:r,loading:i,error:c,refetch:o}}e.s(["useApi",()=>t])},20922,e=>{"use strict";var s=e.i(5111),t=e.i(55703),a=e.i(31119),r=e.i(8779),l=e.i(59053),i=e.i(3634),n=e.i(9064),c=e.i(54520),d=e.i(55657);function o(){let[e,o]=(0,t.useState)("Active"),[x,h]=(0,t.useState)(""),{data:m,loading:u,refetch:p}=(0,a.useApi)(()=>(0,r.getAdminPlayers)(e),[e]),{toast:v}=(0,d.useToast)(),[j,g]=(0,t.useState)(null),[f,N]=(0,t.useState)([]),b=(m||[]).filter(e=>{if(!x)return!0;let s=x.toLowerCase();return e.Name.toLowerCase().includes(s)||e.Email.toLowerCase().includes(s)||e.characters.some(e=>e.name.toLowerCase().includes(s))}),y=async e=>{g(e),N(await (0,r.getAdminPlayerHistory)(e))},A=b.find(e=>e.PlayerID===j);return u?(0,s.jsx)(i.default,{text:"Opening the guild roster..."}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"scroll-heading text-3xl mb-6",children:"ðŸ‘¥ Adventurer Guild Roster"}),(0,s.jsxs)("div",{className:"flex gap-3 mb-4 flex-wrap",children:[(0,s.jsx)("input",{value:x,onChange:e=>h(e.target.value),placeholder:"Search adventurers...",className:"tavern-input max-w-xs"}),(0,s.jsxs)("select",{value:e,onChange:e=>o(e.target.value),className:"tavern-input max-w-[140px]",children:[(0,s.jsx)("option",{value:"",children:"All"}),(0,s.jsx)("option",{value:"Active",children:"Active"}),(0,s.jsx)("option",{value:"Inactive",children:"Inactive"})]}),(0,s.jsx)(c.default,{variant:"sm",onClick:()=>window.location.href="/api/admin/export/players",children:"Export CSV"})]}),(0,s.jsx)("div",{className:"parchment overflow-x-auto mb-4",children:(0,s.jsxs)("table",{className:"w-full text-sm text-[var(--ink)]",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b-2 border-[var(--parchment-dark)]",children:[(0,s.jsx)("th",{className:"text-left p-2 cursor-pointer",children:"Name"}),(0,s.jsx)("th",{className:"text-left p-2",children:"Email"}),(0,s.jsx)("th",{className:"text-left p-2",children:"Characters"}),(0,s.jsx)("th",{className:"p-2",children:"Registered"}),(0,s.jsx)("th",{className:"p-2",children:"Status"})]})}),(0,s.jsx)("tbody",{children:b.map(e=>(0,s.jsxs)("tr",{className:"border-b border-[rgba(0,0,0,0.05)] cursor-pointer hover:bg-[rgba(201,169,89,0.05)]",onClick:()=>y(e.PlayerID),children:[(0,s.jsx)("td",{className:"p-2 font-semibold",children:e.Name}),(0,s.jsx)("td",{className:"p-2 text-xs",children:e.Email}),(0,s.jsx)("td",{className:"p-2",children:e.characters.map((e,t)=>(0,s.jsxs)("span",{className:"inline-block bg-[var(--parchment-dark)] text-[var(--ink)] text-xs px-2 py-0.5 rounded mr-1 mb-1",children:[e.name," (",e.class," Lv",e.level,")"]},t))}),(0,s.jsxs)("td",{className:"p-2 text-center",children:[e.totalRegistrations,e.sessionsAttended?` (${e.sessionsAttended} attended)`:""]}),(0,s.jsx)("td",{className:"p-2 text-center",children:(0,s.jsx)("span",{className:`tier-shield ${"Active"===e.ActiveStatus?"":"!bg-red-900"}`,children:e.ActiveStatus})})]},e.PlayerID))})]})}),A&&(0,s.jsxs)(n.default,{children:[(0,s.jsx)("h3",{className:"font-[var(--font-heading)] text-lg text-[var(--gold)] mb-3",children:A.Name}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm text-[var(--ink)] mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Email:"})," ",A.Email]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Preferred Campaign:"})," ",A.PreferredCampaign||"â€”"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Sessions Attended:"})," ",A.sessionsAttended]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Total Sign-ups:"})," ",A.totalRegistrations]})]}),(0,s.jsx)(c.default,{variant:"Active"===A.ActiveStatus?"danger":"primary",onClick:async()=>{let e="Active"===A.ActiveStatus?"Inactive":"Active";await (0,r.setPlayerStatus)(A.PlayerID,e),v(`Player set to ${e}`,"success"),p()},children:"Active"===A.ActiveStatus?"Deactivate":"Activate"}),(0,s.jsx)("h4",{className:"font-semibold text-[var(--ink)] mt-4 mb-2",children:"Session History"}),0===f.length?(0,s.jsx)("p",{className:"text-[var(--ink-faded)] italic text-sm",children:"No history."}):(0,s.jsxs)("table",{className:"w-full text-sm text-[var(--ink)]",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("th",{className:"text-left p-1",children:"Date"}),(0,s.jsx)("th",{className:"text-left p-1",children:"Campaign"}),(0,s.jsx)("th",{className:"text-left p-1",children:"Character"}),(0,s.jsx)("th",{className:"p-1",children:"Status"})]})}),(0,s.jsx)("tbody",{children:f.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-[rgba(0,0,0,0.05)]",children:[(0,s.jsx)("td",{className:"p-1",children:(0,l.formatDate)(e.sessionDate)}),(0,s.jsx)("td",{className:"p-1",children:e.campaign}),(0,s.jsx)("td",{className:"p-1",children:e.characterName}),(0,s.jsx)("td",{className:"p-1",children:e.status})]},t))})]})]})]})}e.s(["default",()=>o])}]);